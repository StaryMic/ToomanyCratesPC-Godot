[gd_scene load_steps=17 format=3 uid="uid://dmn3mi4c0tk3b"]

[ext_resource type="Script" path="res://Mono/PlayerCharacter/PlayerCharacter.cs" id="1_83cae"]
[ext_resource type="PackedScene" uid="uid://dlrav2fek8i38" path="res://Items/Weapons/Weapon.tscn" id="2_qg52t"]
[ext_resource type="Resource" uid="uid://cgmbq7y2enylt" path="res://Items/Weapons/Crowbar/Crowbar_desc.tres" id="3_pyc31"]
[ext_resource type="Texture2D" uid="uid://8lkjeehlgtvx" path="res://Mono/PlayerCharacter/UI/Circle.svg" id="3_yk1sf"]
[ext_resource type="Texture2D" uid="uid://4wx0bryvre6f" path="res://Mono/PlayerCharacter/flashlightProjection.png" id="4_unb12"]
[ext_resource type="Script" path="res://Mono/PlayerCharacter/Flashlight.cs" id="5_pldrh"]
[ext_resource type="PackedScene" uid="uid://dyhmgsd3w3vjc" path="res://Items/Weapons/Crowbar/Models/Crowbar.glb" id="6_5jrye"]
[ext_resource type="AudioStream" uid="uid://cq1kdwsqexij7" path="res://Items/Weapons/Crowbar/Sounds/Swooshes, Swish, Wood Stick, Heavy SND0419 1.wav" id="7_ch6hn"]
[ext_resource type="AudioStream" uid="uid://dim7xurklvvul" path="res://Items/Weapons/Crowbar/Sounds/Swooshes, Swish, Wood Stick, Heavy SND0419 1 1.wav" id="8_xbg07"]
[ext_resource type="AudioStream" uid="uid://b72qyee4ak4vh" path="res://Items/Weapons/Crowbar/Sounds/Swooshes, Swish, Wood Stick, Heavy SND0419 1 2.wav" id="9_vijwa"]
[ext_resource type="AudioStream" uid="uid://2e7r24j01lat" path="res://Items/Weapons/Crowbar/Sounds/Swooshes, Swish, Wood Stick, Heavy SND0419 1 3.wav" id="10_u5x08"]
[ext_resource type="Resource" uid="uid://bpotvo4us2sb0" path="res://Items/Weapons/TestPistol/TestPistol_desc.tres" id="11_avles"]
[ext_resource type="PackedScene" uid="uid://4xpo5blmae5w" path="res://Items/Weapons/TestPistol/Models/TestPistol_rigged.glb" id="12_1p6c1"]
[ext_resource type="AudioStream" uid="uid://dijb1gi7aa401" path="res://Items/Weapons/Crowbar/Sounds/swoosh_test.wav" id="13_bmwnh"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_xpsck"]
radius = 0.35

[sub_resource type="SphereShape3D" id="SphereShape3D_ign3p"]
radius = 0.35

[node name="PlayerCharacter" type="CharacterBody3D" node_paths=PackedStringArray("CameraAnchor", "Camera", "_rayCast", "_grabPoint", "_crouchCast", "_flashlight")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0)
collision_layer = 2
collision_mask = 13
platform_on_leave = 2
platform_floor_layers = 1
script = ExtResource("1_83cae")
CameraAnchor = NodePath("CamAnchor")
Camera = NodePath("CamAnchor/Camera3D")
_rayCast = NodePath("CamAnchor/GrabRaycast")
_grabPoint = NodePath("CamAnchor/GrabPoint")
_crouchCast = NodePath("CrouchCast")
_flashlight = NodePath("CamAnchor/SpotLight3D")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
shape = SubResource("CapsuleShape3D_xpsck")

[node name="CamAnchor" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.8, 0)

[node name="Camera3D" type="Camera3D" parent="CamAnchor"]
doppler_tracking = 2
current = true
fov = 90.0

[node name="GrabRaycast" type="RayCast3D" parent="CamAnchor"]
target_position = Vector3(0, 0, -2.5)
collision_mask = 13
collide_with_areas = true
debug_shape_thickness = 1

[node name="GrabPoint" type="Node3D" parent="CamAnchor"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -1.8)

[node name="WeaponRaycast" type="RayCast3D" parent="CamAnchor"]
target_position = Vector3(0, 0, -1)
collision_mask = 13
debug_shape_custom_color = Color(0.277507, 0.0612895, 0.183224, 1)
debug_shape_thickness = 1

[node name="Weapon" parent="CamAnchor" node_paths=PackedStringArray("RayCast3D", "PlayerCharacter") instance=ExtResource("2_qg52t")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.564, -0.175, -0.696)
WeaponDescriptor = ExtResource("3_pyc31")
RayCast3D = NodePath("../WeaponRaycast")
PlayerCharacter = NodePath("../..")

[node name="SpotLight3D" type="SpotLight3D" parent="CamAnchor"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.199)
light_energy = 0.0
light_projector = ExtResource("4_unb12")
light_size = 0.064
light_bake_mode = 0
light_cull_mask = 4294967293
shadow_enabled = true
shadow_reverse_cull_face = true
shadow_opacity = 0.7
spot_range = 25.0
spot_attenuation = 2.0
script = ExtResource("5_pldrh")

[node name="CanvasLayer" type="CanvasLayer" parent="."]
follow_viewport_enabled = true

[node name="TextureRect" type="TextureRect" parent="CanvasLayer"]
texture_filter = 1
texture_repeat = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -400.0
offset_top = -400.0
offset_right = 400.0
offset_bottom = 400.0
grow_horizontal = 2
grow_vertical = 2
scale = Vector2(0.005, 0.005)
pivot_offset = Vector2(400, 400)
size_flags_horizontal = 4
size_flags_vertical = 4
texture = ExtResource("3_yk1sf")

[node name="CrouchCast" type="ShapeCast3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
shape = SubResource("SphereShape3D_ign3p")
target_position = Vector3(0, 1.2, 0)
collision_mask = 13

[node name="ResourcePreloader" type="ResourcePreloader" parent="."]
resources = [PackedStringArray("Crowbar", "Crowbar_desc", "Swooshes, Swish, Wood Stick, Heavy SND0419 1", "Swooshes, Swish, Wood Stick, Heavy SND0419 1 1", "Swooshes, Swish, Wood Stick, Heavy SND0419 1 2", "Swooshes, Swish, Wood Stick, Heavy SND0419 1 3", "TestPistol_desc", "TestPistol_rigged", "flashlightProjection", "swoosh_test"), [ExtResource("6_5jrye"), ExtResource("3_pyc31"), ExtResource("7_ch6hn"), ExtResource("8_xbg07"), ExtResource("9_vijwa"), ExtResource("10_u5x08"), ExtResource("11_avles"), ExtResource("12_1p6c1"), ExtResource("4_unb12"), ExtResource("13_bmwnh")]]
